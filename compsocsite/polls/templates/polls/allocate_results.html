{% extends 'polls/base.html' %}

{% block content %}
    <div class="col-md-12">
        <h1>{{ question.question_text }}</h1>

        <ul>
        {% for response in question.response_set.all %}
            {% if response.allocation.item_text %}
                {{ response.user.username }}: {{ response.allocation.item_text }} (last Updated: {{ response.timestamp }}) <br />
                {% for dict in response.dictionary_set.all %}
                    {% for item in dict.sorted_values %}
                       <button type="button" class="btn btn-default">({{ item.1 }}) {{ item.0 }}</button>
                    {% endfor %}
                {% endfor %}
                <br />
            {% endif %}
        {% endfor %}
        </ul>
    </div>


    <br><br>
    Preferences: 
    {% for preference in preferences %}
        <p>{{ preference }}</p>
    {% endfor %}
    <br><br>
    
    <table>
        <tr>
          <th>Allocation Mechanism</th>
          <th>Allocated Items</th>
        </tr>
        <tr>
            <td> Allocation - Round Robin </td>
            <td>{{ round_robin_alloc_items }}</td>
        </tr>
        <tr>
            <td> Allocation - Round Robin Actual</td>
            <td>{{ allocated_items }}</td>
        </tr>
    </table>

{% endblock %}
